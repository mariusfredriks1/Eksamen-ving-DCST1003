<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Øving 6</title>
  </head>
  <body>
    <h2>Oppgave 4</h2>
    <input placeholder="Varenavn" type="text" id="varer" />
    <br />
    <input placeholder="Pris i Kr" type="number" id="pris" />
    <br />
    <button id="fyll">Legg til</button>
    <div id="resultat"></div>

    <br />
    <input type="text" id="vareSok" />
    <br />
    <button id="sok">Søk etter vare</button>
    <br />
    <div id="sokeResultat"></div>
  </body>
  <script>
    // Tomme arrays som skal fylles med varer og priser
    let vareArr = [];
    let prisArr = [];
    // Variabler for brukerinput
    let nyVare = document.getElementById('varer');
    let pris = document.getElementById('pris');
    // Funksjon som kjøres hver gang bruker legger til ny vare
    fyll.onclick = () => {
      // Legger til varen i arrayen
      vareArr.push(nyVare.value);
      prisArr.push(pris.value);
      // Kaller funksjonen som skriver ut varene
      // Slik at varelisten alltid er oppdatert
      visVarer();
    };

    // Funksjon som skriver ut varene
    let visVarer = () => {
      // Tom lokal variabel for å lagre data i
      let tekst = '';
      // Variabel for sum av varene
      let sum = 0;

      // Løkke som går gjennom alle varene
      for (let i = 0; i < vareArr.length; i++) {
        // fyller variablen med varenavn og tilsvarende pris
        tekst += `Varenavn: ${vareArr[i]} Pris: ${prisArr[i]}kr\n`;
        // Utregning for total sum av alle varer
        sum += Number(prisArr[i]);
      }
      // Variabler for Gjennomsnitts, maks- og minimumspris
      let avg = sum / vareArr.length;
      let maksPris = Math.max(...prisArr);
      let minPris = Math.min(...prisArr);

      // Selve resultatutskrivningen til HTML
      resultat.innerText = `${tekst}\n Sum: ${sum}\n Gjennomsnitt: ${avg}\n Høyeste pris: ${maksPris}\n Laveste pris: ${minPris}`;
    };

    // Funksjon som kjøres hver gang bruker søker etter en vare
    sok.onclick = () => {
      // Definerer variablen for den søkte varen
      let soktVare = document.getElementById('vareSok').value;
      // Sjekker om den søkte varen finnes i vare arrayen
      if (vareArr.includes(soktVare)) {
        
        // indexOf lokaliserer indexen til den søkte varen og
        // og setter denne lik vareIndex
        let vareIndex = vareArr.indexOf(soktVare);
        // Skriver ut resultatet. prisarr[vareIndex] henter nå ut
        // den søkte varen sin pris
        sokeResultat.innerText = `Varen med navn ${soktVare} koster ${prisArr[vareIndex]} kr`;
      }
      // Hvis søkt vare ikke er registrert skrives denne beskjeden ut
      else {
        sokeResultat.innerText = `Varen med navn ${soktVare} og tilhørende pris ble ikke funnet i tabellene`;
      }
    };
  </script>
</html>
